# 📌 트랜잭션, Transaction
- 데이터베이스의 상태를 변화시키는 하나의 논리적인 기능을 하기 위한 작업의 단위

### ✅ 트랜잭션의 성질
- **원자성(Atomic)** : 트랜잭션에 포함된 작업은 전부 수행되거나, 전부 수행되지 않아야 한다. (all or nothing)
- **일관성(Consistency)** : 트랜잭션을 수행하기 전이나, 수행한 후나 데이터 베이스는 항상 일관된 상태를 유지해야 한다.
- **고립성(Isolation)** : 수행 중인 트랜잭션에 다른 트랜잭션이 끼어들어 변경 중인 데이터 값을 훼손하는 일이 없어야 한다.
- **지속성(Durability)** : 수행을 완료한 트랜잭션은 변경한 데이터를 영구히 저장해야 한다. 저장된 데이터베이스는 장애 등에 영향을 받지 않아야 한다.

<br>

### ✅ 트랜잭션 명령어, DCL(TCL)
1. **COMMIT** : 현재 트랜잭션에서 수행한 변경 작업을 데이터베이스에 반영
2. **ROLLBACK** : 현재 트랜잭션에서 수행한 모든 변경 작업을 취소하고 이전 상태로 되돌림
3. **SAVEPOINT** : 트랜잭션을 분할하여 중간 저장, `rollback to savepoint이름`으로 저장된 savepoint로 돌아갈 수 있음

<br>

### ✅ 트랜잭션 생명주기
#### 👉 새로운 트랜잭션이 시작하는 경우
- 클라이언트가 접속한 직후(세션 시작)
- commit 실행 직후
- rollback 실행 직후
#### 👉 현재 트랜잭션이 종료되는 경우
- commit 실행 시 : 현재 트랜잭션에서 발생된 변경사항을 DB에 반영
- rollback 실행 시 : 현재 트랜잭션에서 발생된 변경사항을 DB에 반영하지 않음
- 클라이언트가 접속을 종료할 때
    - 정상 종료 시 : 현재 트랜잭션에 아직 반영되지 않은 명령어가 남아있으면 사용자에게 확인
    - 비정상 종료 시 : 무조건 rollback
- DDL(CREATE, ALTER, DROP) 실행 시 : 구조를 변경하는 DDL은 DB의 일관성을 깨뜨리기 때문에 Auto Commit 발생